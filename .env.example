# ============================================
# Neanelu Shopify - Environment Variables Template
# ============================================
# INSTRUCȚIUNI:
# 1. Copiază acest fișier în .env (care NU se comite)
# 2. Completează valorile reale
# 3. Pentru staging/prod, secretele vin din OpenBAO (secret manager)
#
# ROTAȚIE CHEI: Trimestrială pentru token-uri externe (Shopify, BullMQ, OpenAI)
# și chei AES. Documentație completă în Docs/DevOps_Plan_Implementare_Shopify_Enterprise.md

# ============================================
# DATABASE (PostgreSQL 18.1)
# ============================================
# Conexiune runtime (rol app_runtime cu permisiuni limitate)
DATABASE_URL=postgresql://app_runtime:password@localhost:65010/neanelu_shopify

# Conexiune migrații (rol app_migrator cu permisiuni DDL)
DATABASE_URL_MIGRATE=postgresql://app_migrator:password@localhost:65010/neanelu_shopify

# Pool sizing (vezi Plan_de_implementare F2.1.1 pentru recomandări)
# Dev: 10, Staging/Prod: 5 (cu 10 worker containers = 50+ conexiuni totale)
DB_POOL_SIZE=10

# ============================================
# REDIS 8.4 (Cache, Cozi, Vector Search)
# ============================================
REDIS_URL=redis://localhost:65011

# ============================================
# SHOPIFY API
# ============================================
SHOPIFY_API_KEY=your_api_key_here
SHOPIFY_API_SECRET=your_api_secret_here

# Scopes necesare pentru aplicație (lista completă)
SCOPES=read_products,write_products,read_orders,read_inventory,write_inventory,read_fulfillments,read_price_rules,read_discounts

# Pentru embedded app (opțional, dacă nu ești embedded lasă gol)
SHOPIFY_APP_URL=https://your-app-domain.com

# ============================================
# BULLMQ PRO (Registry privat + Runtime License)
# ============================================
# Token pentru npm registry privat Taskforce.sh (folosit de pnpm install)
NPM_TASKFORCESH_TOKEN=your_bullmq_pro_npm_token

# Token de licență runtime BullMQ Pro (folosit în cod)
BULLMQ_PRO_TOKEN=your_bullmq_pro_license_token

# ============================================
# OPENAI / AI ENGINE
# ============================================
OPENAI_API_KEY=your_openai_api_key

# Model pentru embeddings (default: text-embedding-3-small)
OPENAI_EMBEDDING_MODEL=text-embedding-3-small

# ============================================
# SECURITY & ENCRYPTION
# ============================================
# Cheie AES-256-GCM pentru criptare token-uri Shopify în DB
# Generare: openssl rand -hex 32
ENCRYPTION_KEY_256=your_64_char_hex_key_here_must_be_exactly_64_chars

# Suport rotație chei (backward compatibility)
# La rotație, adaugă ENCRYPTION_KEY_V2 și schimbă VERSION la 2
ENCRYPTION_KEY_VERSION=1
# ENCRYPTION_KEY_V1=first_64_char_hex_key
# ENCRYPTION_KEY_V2=new_64_char_hex_key_after_rotation

# ============================================
# APPLICATION
# ============================================
# URL-ul public al aplicației (pentru OAuth callback, webhooks)
APP_HOST=https://localhost:65000

# Mediul curent: development | staging | production
NODE_ENV=development

# Nivel de logging: debug | info | warn | error
LOG_LEVEL=debug

# Port pentru server (default: 3000)
PORT=65000

# ============================================
# OBSERVABILITY (OpenTelemetry)
# ============================================
# Endpoint OTLP pentru export spans/metrics (Jaeger în dev, Grafana Tempo în prod)
OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:65022

# Numele serviciului în traces
OTEL_SERVICE_NAME=neanelu-shopify

# Sampling ratio (1.0 = toate, 0.1 = 10% în prod pentru cost)
OTEL_TRACES_SAMPLER_ARG=1.0

# ============================================
# DOCKER COMPOSE (pentru servicii locale)
# ============================================
# Aceste variabile sunt folosite de docker-compose.yml
# Vezi și .env.compose.example pentru configurații Docker-only
POSTGRES_USER=shopify
POSTGRES_PASSWORD=shopify_dev_password
POSTGRES_DB=neanelu_shopify_dev
