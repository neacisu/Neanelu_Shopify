# ============================================
# Neanelu Shopify - Docker Compose Environment
# ============================================
# IMPORTANT:
# - Folosește EXCLUSIV acest fișier pentru Docker Compose (nu `.env`)
# - Scripturile repo-ului rulează `docker compose --env-file .env.compose ...`
#
# Setup:
#   cp .env.compose.example .env.compose
#   editează valorile necesare (în special domeniu + ACME + auth)

# ============================================
# Domain / Public ingress (Traefik)
# ============================================
APP_HOST=manager.neanelu.ro

# Porturile expuse pe host (default 80/443). Dacă hostul are deja Nginx/Apache pe 80/443,
# poți seta temporar alte porturi pentru dev local.
TRAEFIK_HTTP_PORT=80
TRAEFIK_HTTPS_PORT=443

# Email folosit de Let's Encrypt (ACME)
TRAEFIK_ACME_EMAIL=admin@neanelu.ro

# Cert resolver name (traefik static config uses this)
TRAEFIK_CERT_RESOLVER=letsencrypt

# Traefik dashboard basic-auth users (format: user:hashedPassword)
# Generează hash (bcrypt) astfel:
#   docker run --rm httpd:2.4-alpine htpasswd -nbB admin 'PAROLA_TA'
# Apoi setezi întregul output aici.
# IMPORTANT: în fișierele `--env-file`, Docker Compose interpretează `$` pentru substituții.
# Pentru hash-urile bcrypt (care conțin `$`), dublează `$` -> `$$` în valoare.
TRAEFIK_DASHBOARD_USERS=

# ============================================
# Backend (apps/backend-worker)
# ============================================
PORT=65000
NODE_ENV=development

# Shopify (required for OAuth/Webhooks)
SHOPIFY_API_KEY=
SHOPIFY_API_SECRET=
SHOPIFY_SCOPES=read_products,write_products

# Crypto
ENCRYPTION_KEY_256=

# ============================================
# Data services
# ============================================
POSTGRES_USER=neanelu
POSTGRES_PASSWORD=neanelu_dev_password
POSTGRES_DB=neanelu_shopify

# NOTE: în containere folosim hostnames `db` și `redis`
DATABASE_URL=postgresql://neanelu:neanelu_dev_password@db:5432/neanelu_shopify
REDIS_URL=redis://redis:6379

# ============================================
# Admin tools (dev)
# ============================================
PGADMIN_EMAIL=dev@neanelu.ro
PGADMIN_PASSWORD=dev_password_change_me

# Grafana (admin)
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=change_me

# ============================================
# OpenTelemetry
# ============================================
# Backend exportă către collector (OTLP HTTP)
OTEL_SERVICE_NAME=neanelu-shopify
OTEL_EXPORTER_OTLP_ENDPOINT=http://otel-collector:4318
OTEL_SAMPLING_RATIO=1.0
OBS_DEBUG=0
